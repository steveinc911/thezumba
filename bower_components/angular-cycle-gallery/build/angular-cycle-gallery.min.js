(function(){angular.module("cycleGallery",[])}).call(this),function(){angular.module("cycleGallery").directive("galleryButton",["Finder",function(t){return{restrict:"A",scope:{galleryButton:"@"},link:function(e,n){var i,r;return i=e.galleryButton,r=t.loadGalleryObject(n).events,n.on("click",function(){switch(i){case"next":return r["do"]("move:next");case"prev":return r["do"]("move:prev");case"animateNext":return r["do"]("animate:next");case"animatePrev":return r["do"]("animate:prev")}})}}}])}.call(this),function(){angular.module("cycleGallery").directive("cycleGallery",["GalleryRenderer","ItemsStorage","MoverHolder","GalleryMover","MoverTouch","GalleryEvents","Resize","ResizeEmulator",function(t,e,n,i,r,o,s,u){return{restrict:"A",scope:{galleryInit:"&galleryInit",galleryIndex:"=galleryIndex",configBuffer:"=configBuffer",configAnimationTime:"=configAnimationTime"},compile:function(){return{pre:function(a,c){var h,l,d,p,_,f,y,m,g,I;return h=angular.element(document).find("body"),l={render:{bufferCount:a.configBuffer||2},mover:{animationTime:a.configAnimationTime||300}},g=new e(l.render),y=new t(a),p=new n,f=new i(l.mover,g,y,p),I=new r(f,p),m=new s(f,p),d=new o,g.setIndex(a.galleryIndex||0),c[0].cycleGallery={renderer:y,storage:g,holder:p,mover:f,touch:I,resize:m,events:d},window.resizeEmulator||(window.resizeEmulator=new u),window.resizeEmulator.bind(m["do"],c),d.on("move:next",function(){return f.next()}),d.on("move:prev",function(){return f.prev()}),d.on("animate:next",function(){return f.animateNext()}),d.on("animate:prev",function(){return f.animatePrev()}),h.on("touchend",function(){return I.touchEnd()}),h.on("touchmove",function(t){return I.touchMove(t.touches[0].pageX)}),g.on("change:index",function(){return void 0!==a.galleryIndex?a.galleryIndex=g.getIndex():void 0}),_=a.galleryInit(),_&&_({setIndex:function(t){return f.setIndex(t-0)},getIndex:function(){return g.getIndex()},updateSizes:function(){return f.updateSizes()}}),a.$watch("galleryIndex",function(t){return t!==g.getIndex()&&void 0!==t?f.setIndex(t):void 0}),c.on("$destroy",function(){return d.clear(),window.resizeEmulator.unbind(c),delete c[0].cycleGallery})}}}}}])}.call(this),function(){angular.module("cycleGallery").directive("cycleGalleryHolder",["Finder",function(t){return{compile:function(){return{pre:function(e,n){var i;return i=t.loadGalleryObject(n),i.renderer.setHostElement(n),i.holder.setElement(n),n.on("touchstart",function(t){return i.touch.touchStart(t.touches[0].pageX)})}}}}}])}.call(this),function(){angular.module("cycleGallery").directive("galleryRepeater",["Finder",function(t){return{terminal:!0,transclude:"element",terminal:!0,$$tlb:!0,priority:1e3,link:function(e,n,i,r,o){var s,u,a,c,h;return a=i.galleryRepeater,u=a.match(/^\s*(.+)\s+in\s+(.*?)\s*(\s+track\s+by\s+(.+)\s*)?$/),c=u[1],s=u[2],h=t.loadGalleryObject(n),h.mover.setScope(e),h.renderer.setOptions(c,o),e.$watchCollection(s,function(t){return h.mover.render(t)})}}}])}.call(this),function(){angular.module("cycleGallery").service("CycleGenerator",function(){var t,e;return t=0,e=function(){function e(){this._count=0,this._items=[],this._index=null,this._clearCycleParams()}return e.prototype.setItems=function(t){return this._items=t,this._count=t.length,this._clearCycleParams()},e.prototype.setIndex=function(t){return this._index=t},e.prototype.getPrev=function(t){var e,n;return n=this._cycleIndex+this._index,e=n-t,0>e?(this._cycleGenerate(-1*Math.ceil(e/this._count),!0),this.getPrev(t)):(this._cycleItems.length<n&&this._cycleGenerate(Math.ceil(t/this._count),!0),this._cycleItems.slice(e,n))},e.prototype.getNext=function(t){var e,n;return e=this._cycleIndex+this._index,n=e+t,n>this._cycleItems.length-1&&this._cycleGenerate(Math.ceil(n/this._count),!1),this._cycleItems.slice(e,n)},e.prototype._cycleGenerate=function(t,e){var n,i,r,o,s;for(null==e&&(e=!1),s=[],n=r=0,o=t;o>=0?o>=r:r>=o;n=o>=0?++r:--r)i=JSON.parse(JSON.stringify(this._items)),e?(this._cycleIndex+=this._items.length,s.push(this._cycleItems=this._addUIID(i).concat(this._cycleItems))):s.push(this._cycleItems=this._cycleItems.concat(this._addUIID(i)));return s},e.prototype._addUIID=function(e){var n,i,r;for(i=0,r=e.length;r>i;i++)n=e[i],n._$UUID=++t;return e},e.prototype._clearCycleParams=function(){return this._cycleItems=[],this._cycleIndex=0},e}()})}.call(this),function(){angular.module("cycleGallery").factory("GalleryEvents",function(){var t;return t=function(){function t(){this._stack={}}return t.prototype.on=function(t,e){var n;return(n=this._stack)[t]||(n[t]=[]),this._stack[t].push(e)},t.prototype["do"]=function(t){var e,n,i,r,o,s;for((e=this._stack)[t]||(e[t]=[]),o=this._stack[t],s=[],i=0,r=o.length;r>i;i++)n=o[i],s.push(n());return s},t.prototype.clear=function(){return this._stack={}},t}()})}.call(this),function(){angular.module("cycleGallery").service("Finder",function(){return{loadGalleryObject:function(t){var e;for(e=t;void 0===e.attr("cycle-gallery");)e=e.parent(),void 0===e[0]&&new Error("There are not parent element with attribute [cycle-gallery]");return e[0].cycleGallery}}})}.call(this),function(){angular.module("cycleGallery").service("GalleryRenderer",["RenderedItems",function(t){var e;return e=function(){function e(e){this._$scope=e,this._renderedItems=new t}return e.prototype.setOptions=function(t,e){return this._scopeItemName=t,this._transcludeFunction=e},e.prototype.setHostElement=function(t){return this._$hostElement=t},e.prototype.render=function(t){return this._renderedItems.markAllOutdated(),this._updateRenderedPosition(t),this._renderedItems.removeOutdated(),this._updateHolder()},e.prototype.getRenderedCount=function(){return this._renderedItems.getCount()},e.prototype.firstElement=function(){return this._renderedItems.firstElement()},e.prototype.getElementByIndex=function(t){return this._$hostElement.children().eq(t)[0]},e.prototype.getRightElementsCount=function(t){return this.getRenderedCount()-this.getElementIndex(t)},e.prototype.getElementIndex=function(t){var e;for(e=0;null!==(t=t.previousSibling);)++e;return e},e.prototype._updateRenderedPosition=function(t){var e,n,i,r,o;for(o=[],e=i=0,r=t.length;r>i;e=++i)n=t[e],o.push(this._renderedItems.addItem(e,n));return o},e.prototype._updateHolder=function(){var t,e,n,i,r,o;for(r=this._renderedItems.getItemsForRender(),o=[],n=0,i=r.length;i>n;n++)e=r[n],t=this._newItemScope(e.getData()),o.push(this._transcludeFunction(t,function(n){return function(i){return e.setRenderData(t,i),n._appendItem(e,i)}}(this)));return o},e.prototype._appendItem=function(t,e){return 0===t.getIndex()?this._$hostElement.prepend(e):this._renderedItems.getElementByIndex(t.getIndex()-1).after(e)},e.prototype._newItemScope=function(t){var e;return e=this._$scope.$new(),e[this._scopeItemName]=t,e},e}()}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};angular.module("cycleGallery").service("ItemsStorage",["CycleGenerator",function(e){var n;return n=function(){function n(n){this.on=t(this.on,this),this.nearestItemsCount=n.bufferCount,this.items=[],this.index=0,this.count=0,this.nextBuffer=0,this.prevBuffer=0,this.cycler=new e,this._counterIndex=0,this._events={}}return n.prototype.on=function(t,e){var n;return(n=this._events)[t]||(n[t]=[]),this._events[t].push(e)},n.prototype.trigger=function(t){var e,n,i,r,o;if(this._events[t]){for(r=this._events[t],o=[],n=0,i=r.length;i>n;n++)e=r[n],o.push(e.call());return o}},n.prototype.setItems=function(t){return this.count=t.length,this.items=t,this.cycler.setItems(this.items),this.isIndexInRange()?void 0:this.setIndex(0)},n.prototype.getNearestRange=function(){return 0===this.count?[]:(this.cycler.setIndex(this._counterIndex),[].concat(this.cycler.getPrev(this.nearestItemsCount+this.prevBuffer),this.cycler.getNext(this.nearestItemsCount+this.nextBuffer+1)))},n.prototype.setIndex=function(t){return this._setItemIndex(t),this._counterIndex=this.getIndex()},n.prototype.setIndexDiff=function(t){return this._counterIndex+=t,this._setItemIndex(this.getIndex()+t)},n.prototype.getIndex=function(){return this.index},n.prototype.isIndexInRange=function(){var t;return 0<=(t=this.getIndex())&&t<=this.count},n.prototype.nextIndex=function(){return this._setItemIndex(this.index+1),this._counterIndex++},n.prototype.prevIndex=function(){return this._setItemIndex(this.index-1),this._counterIndex--},n.prototype.getCurrentIndexInRange=function(){return this.nearestItemsCount+this.nextBuffer},n.prototype.clearRangeBuffer=function(){return this._clearNextBuffer(),this._clearPrevBuffer()},n.prototype.incNextBuffer=function(){return++this.nextBuffer},n.prototype.getNextBuffer=function(){return this.nextBuffer},n.prototype.incPrevBuffer=function(){return++this.prevBuffer},n.prototype.getPrevBuffer=function(){return this.prevBuffer},n.prototype._clearNextBuffer=function(){return this._setItemIndex(this.index+this.nextBuffer),this._counterIndex+=this.nextBuffer,this.nextBuffer=0},n.prototype._clearPrevBuffer=function(){return this._setItemIndex(this.index-this.prevBuffer),this._counterIndex-=this.prevBuffer,this.prevBuffer=0},n.prototype._setItemIndex=function(t){return t=this._fixItemIndex(t),this.index!==t?(this.index=t,this.trigger("change:index")):void 0},n.prototype._fixItemIndex=function(t){return t>=this.count&&this.count>0&&(t%=this.count),0>t&&(t=this.count+t),t>=0&&t<this.count||0===this.count||(t=this._fixItemIndex(t)),t},n}()}])}.call(this),function(){angular.module("cycleGallery").service("GalleryMover",[function(){var t;return t=function(){function t(t,e,n,i){this.animationTime=t.animationTime,this._storage=e,this._renderer=n,this._holder=i,this._animation=null,this._necessaryIndex=0,this._displayIndex=0}return t.prototype.ANIMATION_SIDE_NEXT=1,t.prototype.ANIMATION_SIDE_PREV=2,t.prototype.setScope=function(t){return this._$scope=t},t.prototype.render=function(t){return null==t&&(t=[]),this._storage.setItems(t),this._renderer.render(this._storage.getNearestRange()),this._holder.update(),this._syncIndexes(),this._applyPositionForNecessaryIndex()},t.prototype.setIndex=function(t){return this._animation_side?this._stopAnimationSide():(this._storage.setIndex(t),this._syncIndexes(),this._stopPreviusAnimation(),this._rerender())},t.prototype.next=function(){return this._animation_side?this._stopAnimationSide():(this._storage.nextIndex(),this._syncIndexes(),this._rerender())},t.prototype.prev=function(){return this._animation_side?this._stopAnimationSide():(this._storage.prevIndex(),this._syncIndexes(),this._rerender())},t.prototype.animateNext=function(){return this._clearAnimationTime(),this._storage.incNextBuffer(),++this._necessaryIndex,this._animate()},t.prototype.animatePrev=function(){return this._clearAnimationTime(),this._storage.incPrevBuffer(),--this._necessaryIndex,this._animate()},t.prototype.getAnimationSide=function(){return this._animation_side},t.prototype.updateSizes=function(){return this._stopAnimationSide(),this._holder.update(),this._applyPositionForNecessaryIndex()},t.prototype.forceMove=function(t){return this._holder.setPosition(this._getPositionForDisplayIndex()+t),this._detectPosition()},t.prototype.applyIndexDiff=function(t){return this._storage.setIndexDiff(t),this._storage.clearRangeBuffer(),this._syncIndexes(),this._rerender(),this._detectPositionClear()},t.prototype._stopPreviusAnimation=function(){return this._animation&&this._animation.pause(),this._animation&&this._animation.kill(),this._animation=null},t.prototype._stopAnimationSide=function(){return this._stopPreviusAnimation(),this._clearAnimationTime(),this._animation_side=null,this._storage.clearRangeBuffer(),this._syncIndexes(),this._rerender()},t.prototype._getAnimationTime=function(){var t;return t=(new Date).getTime(),this._animationStartTime||(this._animationStartTime=t),this.animationTime-(t-this._animationStartTime)},t.prototype._clearAnimationTime=function(){return this._animationStartTime=null},t.prototype._animate=function(t){return null==t&&(t=this._getPositionForNecessaryIndex()),this._stopPreviusAnimation(),this._animation=TweenMax.to(this._holder.getElement(),this._getAnimationTime()/1e3,{left:t+"px",ease:Linear.easeNone,onUpdate:function(t){return function(){return t._checkFrameChange()}}(this),onComplete:function(t){return function(){return t._onCompleteAnimation()}}(this)})},t.prototype._onCompleteAnimation=function(){return this._clearAnimationTime(),this._detectPositionClear(),this._storage.clearRangeBuffer(),this._syncIndexes(),this._rerender()},t.prototype._detectPosition=function(){var t;return this._holder.createPositionLock(),t=this._holder.getPositionLockDiff(),Math.abs(t)>5?(this._animation_side=0>t?this.ANIMATION_SIDE_NEXT:this.ANIMATION_SIDE_PREV,!0):!1},t.prototype._detectPositionClear=function(){return this._holder.clearPositionLock(),this._animation_side=null},t.prototype._checkFrameChange=function(){var t,e,n;return this._detectPosition()?(e=this._holder.getDisplayIndex())===this.getDisplayIndex()?!1:(this._stopPreviusAnimation(),t=this._renderer.getElementByIndex(e),n=this._renderer.getRightElementsCount(t),this._animationRender(),this._animation_side===this.ANIMATION_SIDE_NEXT?this._displayIndex++:(this._displayIndex=this._renderer.getRenderedCount()-n,this._holder.setPosition(this._getPositionForDisplayIndex()+this._holder.getSlideDiff()),this._necessaryIndex=this.getTrueIndex()),this._detectPositionClear(),this._animate()):!1},t.prototype._applyPositionForNecessaryIndex=function(){return this._holder.setPosition(this._getPositionForNecessaryIndex())},t.prototype._getPositionForDisplayIndex=function(){return this._holder.__calculatePositionForIndex(this.getDisplayIndex())},t.prototype._getPositionForNecessaryIndex=function(){return this._holder.__calculatePositionForIndex(this.getNecessaryIndex())},t.prototype.getTrueIndex=function(){return this._storage.getCurrentIndexInRange()},t.prototype.getDisplayIndex=function(){return this._displayIndex},t.prototype.getNecessaryIndex=function(){return this._necessaryIndex},t.prototype._syncIndexes=function(){return this._necessaryIndex=this.getTrueIndex(),this._displayIndex=this.getTrueIndex()},t.prototype.getUseableDiff=function(){var t,e;return e=this._holder.getSlideDiff(),t=Math.abs(e)>this._holder.getItemWidth()/2,t&&(e+=this._holder.getItemWidth()),e},t.prototype._animationRender=function(){return this._renderer.render(this._storage.getNearestRange()),this._scopeApply()},t.prototype._rerender=function(){return this._renderer.render(this._storage.getNearestRange()),this._applyPositionForNecessaryIndex(),this._scopeApply()},t.prototype._scopeApply=function(){return this._$scope?this._$scope.$$phase?void 0:this._$scope.$apply():void 0},t}()}])}.call(this),function(){angular.module("cycleGallery").service("RenderedItem",function(){var t;return t=function(){function t(t,e){this._index=t,this._data=e,this._outdate=!1,this._rendered=!1,this._element=null,this._scope=null}return t.prototype.getIndex=function(){return this._index},t.prototype.isDataMatch=function(t){return this._data&&t&&this._data._$UUID===t._$UUID},t.prototype.getData=function(){return this._data},t.prototype.getElement=function(){return this._element},t.prototype.updateRenderIndex=function(t){return this._index=t,this._outdate=!1,this._rendered=!0},t.prototype.setRenderData=function(t,e){return this._scope=t,this._element=e,this._outdate=!1,this._rendered=!0},t.prototype.destroy=function(){return this._element.remove(),this._scope.$destroy()},t.prototype.isOutdate=function(){return this._outdate},t.prototype.markOutdated=function(){return this._outdate=!0},t.prototype.isWaitingForRender=function(){return this._outdate===!1&&this._rendered===!1},t}()})}.call(this),function(){angular.module("cycleGallery").factory("RenderedItems",["RenderedItem",function(t){var e;return e=function(){function e(){this._items=[]}return e.prototype.addItem=function(e,n){var i,r,o,s;for(s=this._items,r=0,o=s.length;o>r;r++)if(i=s[r],i.isDataMatch(n))return i.updateRenderIndex(e),!0;return this._items.push(new t(e,n))},e.prototype.getCount=function(){return this._items.length},e.prototype.getItemsForRender=function(){var t,e,n,i,r;for(e=[],r=this._items,n=0,i=r.length;i>n;n++)t=r[n],t.isWaitingForRender()&&e.push(t);return e},e.prototype.markAllOutdated=function(){var t,e,n,i,r;for(i=this._items,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.markOutdated());return r},e.prototype.removeOutdated=function(){var t,e,n,i,r,o,s,u,a;for(e=[],u=this._items,t=i=0,o=u.length;o>i;t=++i)n=u[t],n.isOutdate()&&(e.unshift(t),n.destroy());for(a=[],r=0,s=e.length;s>r;r++)t=e[r],a.push(this._items.splice(t,1));return a},e.prototype.firstElement=function(){return this.getElementByIndex(0)},e.prototype.getElementByIndex=function(t){var e,n,i,r;for(r=this._items,n=0,i=r.length;i>n;n++)if(e=r[n],e.getIndex()===t)return e.getElement()},e}()}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};angular.module("cycleGallery").factory("Resize",function(){var e;return e=function(){function e(e,n){this["do"]=t(this["do"],this),this.mover=e,this.holder=n,this.resizeTimeout=0,this.resizeDelay=25}return e.prototype["do"]=function(){return clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(t){return function(){return t._resize()}}(this),this.resizeDelay)},e.prototype._resize=function(){return this.holder.update(),this.mover._rerender()},e}()})}.call(this),function(){angular.module("cycleGallery").factory("ResizeEmulator",["ResizeEmulatorAction","$window",function(t,e){var n;return n=function(){function n(){this._storage=[],angular.element(e).bind("resize orientationchange",function(t){return function(){return t.onResize()}}(this))}return n.prototype.onResize=function(){var t,e,n,i,r;if(this._storage.length>0){for(i=this._storage,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.apply());return r}},n.prototype.bind=function(e,n){var i;return(i=this.actionExists(n))?i.fn=e:(i=new t(e,n),this._storage.push(i))},n.prototype.actionExists=function(t){var e,n,i,r;for(r=this._storage,n=0,i=r.length;i>n;n++)if(e=r[n],e.key===t)return e;return!1},n.prototype.unbind=function(t){var e;return(e=this._storage)[t]||(e[t]=[])},n}()}])}.call(this),function(){angular.module("cycleGallery").service("MoverHolder",function(){var t;return t=function(){function t(){this._$hostElement=null,this._itemWidth=0,this._position_lock=null}return t.prototype.setElement=function(t){return this._$hostElement=t},t.prototype.update=function(){return this.getItemWidth(!1)},t.prototype.getElement=function(){return this._$hostElement},t.prototype.getDisplayIndex=function(){return Math.abs(Math.round(this.getCurrentPosition()/this.getItemWidth()))},t.prototype.getItemWidth=function(t){var e;return null==t&&(t=!0),this._itemWidth&&t?this._itemWidth:(e=this._$hostElement.children().eq(0),e[0]?this._itemWidth=e[0].offsetWidth:void 0)},t.prototype.getCurrentPosition=function(){return parseInt(this._$hostElement.css("left"),10)},t.prototype.setPosition=function(t){return this._$hostElement.css("left",t+"px")},t.prototype.getSlideDiff=function(){return this.getCurrentPosition()%this.getItemWidth()},t.prototype.__calculatePositionForIndex=function(t){return this.getItemWidth()*t*-1},t.prototype.createPositionLock=function(){return this._position_lock?void 0:this._position_lock=this.getCurrentPosition()},t.prototype.getPositionLockDiff=function(){return this.getCurrentPosition()-this._position_lock},t.prototype.clearPositionLock=function(){return this._position_lock=null},t}()})}.call(this),function(){angular.module("cycleGallery").service("MoverTouch",function(){var t;return t=function(){function t(t,e){this._mover=t,this._holder=e,this._trigger=!1,this._start_position=0,this._last_position=0,this._last_track_time=null,this._last_track_position=null}return t.prototype.TRACK_TIME=150,t.prototype.MIN_POSITION_CHANGE=30,t.prototype.touchStart=function(t){return this._trigger=!0,this._mover._stopPreviusAnimation(),this._start_position=t-this._mover.getUseableDiff(),this._setPosition(0),this._startSwipeDetecting(),this._moveTrackingReload()},t.prototype.touchMove=function(t){return this._trigger?(this._setPosition(t-this._start_position),this._mover.forceMove(this._getPosition()),this._mover._detectPosition(),this._moveTracking()):!0},t.prototype.touchEnd=function(){var t;return this._trigger?(this._trigger=!1,t=this._holder.getDisplayIndex()-this._mover.getTrueIndex(),0===t?(this._moveTracking(!0),this._isSwipeReady()&&this._swipeChange()):this._rerenderOnIndexDiff(t),this._mover._detectPositionClear(),this._mover._animate()):!0},t.prototype._rerenderOnIndexDiff=function(t){var e;return e=this._mover.getUseableDiff(),this._mover.applyIndexDiff(t),this._holder.setPosition(this._holder.getCurrentPosition()+e)},t.prototype._startSwipeDetecting=function(){return this._force_swipe=!1},t.prototype._isSwipeReady=function(){return this._force_swipe},t.prototype._setPosition=function(t){return this._last_position=t},t.prototype._getPosition=function(){return this._last_position},t.prototype._moveTrackingReload=function(){return this._last_track_time=(new Date).getTime(),this._last_track_position=this._getPosition()},t.prototype._moveTracking=function(t){var e,n;return null==t&&(t=!1),n=(new Date).getTime()-this._last_track_time>this.TRACK_TIME,e=t&&!this._force_swipe,n||e?(this._force_swipe=this._checkForForceSwipe(),this._moveTrackingReload()):void 0},t.prototype._checkForForceSwipe=function(){var t;return t=this._last_track_position-this._getPosition(),Math.abs(t)>this.MIN_POSITION_CHANGE},t.prototype._swipeChange=function(){return this._mover.getAnimationSide()===this._mover.ANIMATION_SIDE_NEXT?this._mover.animateNext():this._mover.animatePrev()},t}()})}.call(this),function(){angular.module("cycleGallery").service("ResizeEmulatorAction",[function(){var t;return t=function(){function t(t,e){this.fn=t,this.key=e}return t.prototype.apply=function(){return this.fn.call()},t}()}])}.call(this);